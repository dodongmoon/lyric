<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>양가연 서사 갈래의 흐름</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #5671f0;
            --secondary: #3f37c9;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4bb543;
            --youth-primary: #7209b7;
            --youth-secondary: #3a0ca3;
            --youth-accent: #4cc9f0;
            --youth-light: #f0f7ff;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --author-color: #4cc9f0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e6f1 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }
        
        h1 {
            text-align: center;
            font-weight: 700;
            font-size: 2.2rem;
            margin: 0;
            letter-spacing: -0.5px;
        }
        
        .container {
            max-width: 900px;
            margin: -2rem auto 2rem;
            padding: 0 20px;
            position: relative;
        }
        
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .instruction {
            background-color: rgba(67, 97, 238, 0.1);
            border-left: 4px solid var(--primary);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            color: var(--dark);
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        #resetButton {
            background-color: var(--secondary);
        }
        
        #resetButton:hover {
            background-color: #4e46e5;
        }
        
        #revealAllButton {
            background-color: var(--success);
        }
        
        #revealAllButton:hover {
            background-color: #55c24f;
        }
        
        #hideAllButton {
            background-color: var(--accent);
        }
        
        #hideAllButton:hover {
            background-color: #ff3596;
        }
        
        #output {
            background-color: var(--light);
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 100px;
            line-height: 1.8;
            border: 1px solid #e9ecef;
            font-size: 1rem;
            overflow-wrap: break-word;
        }
        
        .section-header {
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }
        
        .paragraph {
            margin-bottom: 0.8rem;
        }
        
        .hidden-word {
            background-color: rgba(247, 37, 133, 0.1);
            border: 1px dashed var(--accent);
            padding: 2px 8px;
            border-radius: 4px;
            cursor: pointer;
            color: var(--accent);
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-block;
            margin: 0 2px;
        }
        
        .hidden-word:hover {
            background-color: rgba(247, 37, 133, 0.2);
            transform: scale(1.05);
        }
        
        .hidden-word-angle {
            background-color: rgba(67, 97, 238, 0.1);
            border: 1px dashed var(--primary);
            padding: 2px 8px;
            border-radius: 4px;
            cursor: pointer;
            color: var(--primary);
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-block;
            margin: 0 2px;
        }
        
        .hidden-word-angle:hover {
            background-color: rgba(67, 97, 238, 0.2);
            transform: scale(1.05);
        }
        
        .hidden-word-author {
            background-color: rgba(76, 201, 240, 0.1);
            border: 1px dashed var(--author-color);
            padding: 2px 8px;
            border-radius: 4px;
            cursor: pointer;
            color: var(--author-color);
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-block;
            margin: 0 2px;
        }
        
        .hidden-word-author:hover {
            background-color: rgba(76, 201, 240, 0.2);
            transform: scale(1.05);
        }
        
        .mode-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .mode-btn {
            border: 1px solid var(--primary);
            background-color: white;
            color: var(--primary);
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .mode-btn.active {
            background-color: var(--primary);
            color: white;
        }
        
        footer {
            text-align: center;
            padding: 1.5rem 0;
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
                margin-top: -1.5rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            button {
                padding: 10px 15px;
                font-size: 0.9rem;
                flex: 1;
                min-width: 100px;
            }
        }
        
        /* Youth Assistant Chat Styles */
        .youth-section {
            margin-top: 2rem;
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .youth-header {
            background: linear-gradient(135deg, var(--youth-primary) 0%, var(--youth-secondary) 100%);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .youth-title {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .youth-emoji {
            font-size: 1.5rem;
        }
        
        .youth-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .youth-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            background-color: #f5f7fb;
        }
        
        .youth-content.open {
            max-height: 10000px; /* Large enough to contain all content */
            padding-bottom: 10px;
        }
        
        /* Chat UI Styles */
        .chat-container {
            display: flex;
            flex-direction: column;
            padding: 15px;
        }
        
        .chat-message {
            display: flex;
            margin-bottom: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--youth-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
        }
        
        .message-content {
            background-color: white;
            padding: 12px 16px;
            border-radius: 18px;
            border-top-left-radius: 4px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            max-width: calc(100% - 60px);
            line-height: 1.5;
            font-size: 0.95rem;
            position: relative;
        }
        
        .message-content::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 15px;
            border: 8px solid transparent;
            border-right-color: white;
            border-left: 0;
            border-top: 0;
        }
        
        .chat-header {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .chat-name {
            font-weight: 600;
            color: var(--youth-primary);
            margin-right: 8px;
        }
        
        .chat-time {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .chat-section-title {
            font-weight: 600;
            color: var(--youth-secondary);
            margin-top: 10px;
            margin-bottom: 5px;
            border-bottom: 2px solid rgba(114, 9, 183, 0.1);
            padding-bottom: 3px;
        }
        
        .chat-highlight {
            background-color: rgba(114, 9, 183, 0.1);
            color: var(--youth-primary);
            padding: 0 3px;
            border-radius: 3px;
            font-weight: 500;
        }
        
        .chat-list {
            list-style-type: none;
            padding-left: 0;
            margin-top: 5px;
        }
        
        .chat-list li {
            position: relative;
            padding-left: 15px;
            margin-bottom: 5px;
        }
        
        .chat-list li:before {
            content: "✦";
            position: absolute;
            left: 0;
            color: var(--youth-accent);
        }
        
        .chat-message strong {
            color: #4361ee;
            font-weight: 600;
        }
        
        .chat-divider {
            text-align: center;
            margin: 15px 0;
            position: relative;
        }
        
        .chat-divider:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background-color: rgba(108, 117, 125, 0.2);
        }
        
        .chat-divider span {
            position: relative;
            background-color: #f5f7fb;
            padding: 0 10px;
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        @media (max-width: 768px) {
            .youth-title {
                font-size: 1.2rem;
            }
            
            .avatar {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            
            .message-content {
                font-size: 0.9rem;
                padding: 10px 12px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>양가연 서사 갈래의 흐름</h1>
    </header>
    
    <div class="container">
        <div class="card">
            <div class="instruction">
                학습지 내용 중 <span id="currentModeDesc">[대괄호]로 표시된 단어는 '?'로 가려져 있습니다.</span> 숨겨진 단어를 클릭하면 원래 단어가 표시됩니다.
            </div>
            
            <div class="mode-selector">
                <button id="bracketMode" class="mode-btn active">학습지 빈칸</button>
                <button id="angleMode" class="mode-btn">작품명 빈칸</button>
                <button id="authorMode" class="mode-btn">작가 빈칸</button>
                <button id="allMode" class="mode-btn">전체 빈칸</button>
            </div>
            
            <div class="button-group">
                <button id="resetButton">예제 학습지 보기</button>
                <button id="revealAllButton">모두 보이기</button>
                <button id="hideAllButton">모두 숨기기</button>
            </div>
            
            <div id="output"></div>
        </div>
        
        <!-- Youth Assistant Section -->
        <div class="youth-section">
            <div class="youth-header" id="youthToggle">
                <div class="youth-title">
                    <span class="youth-emoji">✨</span>
                    <span>잼민이 어시스트</span>
                </div>
                <div class="youth-toggle">▼</div>
            </div>
            <div class="youth-content" id="youthContent">
                <div class="chat-container">
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:30</div>
                            </div>
                            안녕! 서사 갈래 정리 좀 도와줄게~ 이거 암기하려면 진짜 머리 터질 것 같더라고ㅠㅠ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:31</div>
                            </div>
                            <strong>1. 옛날 시조때(?) 초창기</strong><br>
                            단군신화부터 고구려ㆍ신라ㆍ백제의 건국 신화까지 ㄷㄷ... 이 시절엔 막 "우린 곰이 사람 된 신화 있다!" 이러면서 국뽕 제대로 차오르는 때임.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:31</div>
                            </div>
                            &lt;조신의 꿈&gt;, &lt;바보 온달&gt;, &lt;도미 처&gt; 같은 설화 ㅋㅋ 그냥 옛날판 썰방이라고 보면 됨.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:32</div>
                            </div>
                            삼국사기, 삼국유사(고려 때 편찬) 등 문헌에 실려서 지금까지 전해지는 중임.
                        </div>
                    </div>

                    <div class="chat-divider">
                        <span>10분 후</span>
                    </div>

                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:41</div>
                            </div>
                            <strong>2. 고려 시대로 넘어가 보자</strong><br>
                            설화는 삼국시대 때부터 이미 삐용삐용 전해짐.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:42</div>
                            </div>
                            패관문학: 민간에서 떠도는 썰 모아서 편집+창의성 넣어서 재탄생. 이인로의 『파한집』, 최자의 『보한집』, 이제현의 『역옹패설』 등등 ㅇㅇ.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:43</div>
                            </div>
                            이게 훗날 소설로 폭발하는 씨앗이 됨. 진짜 중요한 포인트 ㄷㄷ.
                        </div>
                    </div>

                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:45</div>
                            </div>
                            <strong>3. 가전(假傳) - 고려 중기 이후</strong><br>
                            물건이나 사물을 의인화해서 전기(傳奇) 형식으로 서술ㅋㅋ 뭔가 평소에 "벼루가 나한테 불만을 토로했다" 이런 식?;;
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:46</div>
                            </div>
                            좀 교훈 넣으면서도 허구를 섞으니 "우와 이거 소설 가능?" 이런 느낌.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:47</div>
                            </div>
                            소설에 한 발 더 가까워졌다는 평을 듣는 장르.
                        </div>
                    </div>

                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:50</div>
                            </div>
                            <strong>4. 조선 전기</strong><br>
                            설화는 삼국시대 때부터 이미 삐용삐용 전해짐.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:51</div>
                            </div>
                            소설 수록 책 – 성현 『용재총화』, 어숙권 『패관잡기』
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:52</div>
                            </div>
                            소설집 – ‘신광한’ 『기재기이』
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:53</div>
                            </div>
                            우리나라 최초의 한문소설
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:54</div>
                            </div>
                            김시습의 『금오신화』가 갓 오브 갓. 여기 &lt;이생규장전&gt;, &lt;취유부벽정기&gt;, &lt;남염부주지&gt;, &lt;용궁부연록&gt; 막 잔뜩 들어 있음.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:55</div>
                            </div>
                            현실+비현실 섞은 전기소설 장르의 대표주자라 이때부터 작가들 "이거다!" 하고 꽂혔음.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:56</div>
                            </div>
                            임제 &lt;원생몽유록&gt;: 꿈 얘기 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 2:57</div>
                            </div>
                            &lt;수성지&gt;: 인간 마음을 의인화한다고... 뇌절?;; 아무튼 조선 전기부터 이미 상상력 풀가동.
                        </div>
                    </div>

                    <div class="chat-divider">
                        <span>5분 후</span>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:01</div>
                            </div>
                            <strong>5. 조선 후기</strong><br>
                            "소설 대붐"이 온 시기 ㅋㅋ 대단하다 진짜.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:02</div>
                            </div>
                            허균 『홍길동전』: 우리나라 최초 '한글' 소설. "분명히 아버지를 아버지라 못 부른 홍길동" ㅠㅠ 서얼 차별 타파와 부패한 정치 개혁 의도로 지은 사회 소설임)
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:03</div>
                            </div>
                            <div class="chat-section-title">가정 소설</div>
                            &lt;장화홍련전&gt;, &lt;콩쥐팥쥐전&gt;, ‘김만중’ <사씨남정기> 등. 집안에서 난리 나는 스토리 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:04</div>
                            </div>
                            <div class="chat-section-title">가문 소설</div>
                            &lt;완월회맹연&gt;, &lt;임화정연&gt; → 몇 대 걸친 흥망성쇠 ㄷㄷ 스케일 오지네.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:05</div>
                            </div>
                            <div class="chat-section-title">군담소설 / 영웅소설</div>
                            전쟁+무쌍. 심지어 여성 영웅 &lt;박씨전&gt;, &lt;홍계월전&gt;도 나옴.
                            <ul class="chat-list">
                                <li>실화 전쟁소설: &lt;임진록&gt;, &lt;임경업전&gt; 등.</li>
                                <li>창작 전쟁소설: &lt;유충렬전&gt;, &lt;조웅전&gt;.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:06</div>
                            </div>
                            <div class="chat-section-title">몽자류 소설</div>
                            김만중 &lt;구운몽&gt;, 남영로 &lt;옥루몽&gt; → 꿈에서 다 해먹음 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:07</div>
                            </div>
                            <div class="chat-section-title">판소리계 소설</div>
                            &lt;춘향전&gt;, &lt;심청전&gt;, &lt;흥부전&gt; → 시끄럽게 탁탁 치면서 부르는 판소리가 소설로? ㅋㅋ 해학+풍자 ㅗㅜㅑ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:08</div>
                            </div>
                            <div class="chat-section-title">우화 소설</div>
                            동물에 빙의해 세상 비꼬기. &lt;장끼전&gt;, &lt;두껍전&gt; 등.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:09</div>
                            </div>
                            <span class="chat-highlight">세태 소설</span>: 사회 전환기에 사람들 개삽질하는 모습… 이것도 재밌게 풀어냄.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:10</div>
                            </div>
                            <span class="chat-highlight">한문 소설</span>: 실학파 문인 박지원 &lt;양반전&gt;, &lt;광문자전&gt; 등 → 양반 조져버리는 스토리 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:11</div>
                            </div>
                            <div class="chat-section-title">소설이 개유행한 이유</div>
                            문학 즐기는 독자층 증가 + 민간 출판(방각본) & 세책가(책 대여소) 활성화 → "야 소설 빌려볼래?" 이러면서 막 돌아다님.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:12</div>
                            </div>
                            야담집: 『청구야담』처럼 설화를 한문으로 기록한 책들도 터져나옴.
                        </div>
                    </div>

                    <div class="chat-divider">
                        <span>15분 후</span>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:28</div>
                            </div>
                            <strong>6. 개화기 (조선 끝물~근대 초기)</strong><br>
                            신소설 & 역사·전기 소설이 메인. 세상이 바뀌니까 소설도 바뀜 ㄷㄷ.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:29</div>
                            </div>
                            <div class="chat-section-title">신소설</div>
                            봉건 박살, 개화, 독립, 계몽… "서양 좋아! 문명사회 짱!" 같은 내용 많음.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:30</div>
                            </div>
                            이인직 &lt;혈의 누&gt;: 우리나라 최초 신소설;; 여기서부터 여성 인권, 신교육 강조 ㄷㄷ 신세계다 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:31</div>
                            </div>
                            <div class="chat-section-title">역사·전기 소설</div>
                            장지연, 신채호 → "나라 빼앗기면 안된다!" 애국심 뿜뿜.
                        </div>
                    </div>
                    
                    <!-- 이어서 나머지 시대별 내용 계속 -->
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:35</div>
                            </div>
                            <strong>7. 1930년대 (일제강점기 시절)</strong><br>
                            문학이 '현실 파헤치기 vs 도시감성' 등등으로 확 갈라짐.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:36</div>
                            </div>
                            <div class="chat-section-title">리얼리즘 소설</div>
                            이기영 &lt;고향&gt;: 농촌 현실의 참상 ㄷㄷ<br>
                            강경애 &lt;지하촌&gt;: 빈민촌 최악 ㅠㅠ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:37</div>
                            </div>
                            <div class="chat-section-title">모더니즘 소설</div>
                            박태원 &lt;소설가 구보 씨의 일일&gt;: 백수 소설가 하루종일 경성 걷는 얘기 ㅋㅋ<br>
                            이상 &lt;날개&gt;: 정신세계 빡세게 탐구. "나는 새가 되고 싶다?" 약간 이런 느낌.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:38</div>
                            </div>
                            <span class="chat-highlight">농촌 소설</span>: 심훈 &lt;상록수&gt;, 김유정 &lt;만무방&gt; → 농촌 희망, 개혁 등등 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:39</div>
                            </div>
                            <span class="chat-highlight">역사 소설</span>: 김동인 &lt;운현궁의 봄&gt;, 현진건 &lt;무영탑&gt; → 옛날 썰 재해석.
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:40</div>
                            </div>
                            <span class="chat-highlight">가족사 소설</span>: 염상섭 &lt;삼대&gt;, 채만식 &lt;태평천하&gt; → 가족 대물림 이야기로 사회비판 ㅋㅋ
                        </div>
                    </div>
                    
                    <div class="chat-divider">
                        <span>10분 후</span>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 3:50</div>
                            </div>
                            <strong>8. 광복 직후</strong><br>
                            해방이 왔지만 세상 혼돈 ㅠㅠ
                        </div>
                    </div>
                    
                    <!-- 남은 시대별 내용 계속... -->
                    
                    <!-- 마지막 부분 -->
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 4:25</div>
                            </div>
                            <strong>흐름 요약</strong><br>
                            신화/설화(고대~중세) → 2) 패관문학+가전(고려) → 3) 한문소설/전기소설(조선 전기) → 4) 한글소설 빵! (홍길동전부터 폭발, 조선 후기) → 5) 근대(개화기) 신소설 → 6) 일제강점기(1930년대) 리얼리즘·모더니즘·농촌소설 etc. → 7) 광복 직후(해방+혼란) → 8) 전쟁 후(1950~60) 재건 + 다양한 주제 → 9) 산업화(1970) → 10) 민주화(1980) → 11) 개인·일상 중시(1990~)
                        </div>
                    </div>
                    
                    <div class="chat-message">
                        <div class="avatar">Z</div>
                        <div class="message-content">
                            <div class="chat-header">
                                <div class="chat-name">잼쌤</div>
                                <div class="chat-time">오늘 오후 4:27</div>
                            </div>
                            시험칠 때 시대별 키워드만 꿀 빨듯이 외우면 좀 살만할 듯 ㅋㅋ<br>
                            너무 두려워 말고, "아~ 이때는 이런 상황이라 이런 소설이 나왔구나" 정도로 스토리 흐름 잡으면 기억하기 편할 거임.<br>
                            화이팅 ㅠㅠ
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>클릭하여 단어를 확인하고 암기하세요 2023</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const output = document.getElementById('output');
            const resetButton = document.getElementById('resetButton');
            const revealAllButton = document.getElementById('revealAllButton');
            const hideAllButton = document.getElementById('hideAllButton');
            const bracketModeBtn = document.getElementById('bracketMode');
            const angleModeBtn = document.getElementById('angleMode');
            const authorModeBtn = document.getElementById('authorMode');
            const allModeBtn = document.getElementById('allMode');
            const currentModeDesc = document.getElementById('currentModeDesc');
            
            let currentMode = 'brackets'; // 'brackets' or 'angles' or 'authors' or 'all'

            const defaultContent = `
            1.	초기 모습
(1) 단군신화, 고구려, 신라, 백제의 건국 신화
(2) <조신의 꿈>, <바보 온달>, <도미 처> 등의 설화에서 찾아볼 수 있다.
•	고려 시대 편찬된 [삼국사기], [삼국유사] 등의 문헌에 기록되어 전해짐
2.	고려 시대
(1) 설화 → [삼국시대]부터 전래됨
(2) [패관문학] – ‘이인로’ 『파한집』, 최자 『보한집』, 이제현 『역옹패설』 등에 수록됨
-민간에서 수집된 이야기가 창의성과 윤색을 더한 산문 문학으로 
-뒤에 [소설]로 발달의 모태가 되었다 (패관 문학의 의의)
3. 가전 -고려 중기 이후
-사물을 [의인화]해서 전기 형식으로 서술하는 문학 양식
-인물의 일대기를 기록하는 전의 전통을 이어받은 것으로[교술]적인 성격도 지니지만
-작가의 창의성이 더해진 허구적인 이야기기라는 점에서 좀 더 [소설]에 다가간 것으로 볼 수 있다.
3.	조선 전기
(1) 소설 수록 책 – ‘성현’ 『용재총화』, ‘어숙권’ 『패관잡기』
(2) 소설집 – ‘신광한’ 『기재기이』
(3) 우리나라 최초의 [한문] 소설
- ‘김시습’ [금오신화], [반복사저포기], <이생규장전>, <취유부벽정기>, <남염부주지>,<용궁부연록>
-인물과 구조 면에서 현실과 비현실의 결합을 통해 / 당대 문제의식이나 작가의 세계관을 표출한 소설
- 소설의 하위 유형 중 '전기 소설'의 대표작으로 평가받음 
(4) 기타 – ‘임제’ <원생몽유록> (꿈속에서 겪은 일 기록). <수성지> (인간의 마음을 의인화함
4. 조선 후기
(1) 우리나라 최초 [한글] 소설 – ‘허균’ 『홍길동전』
(당시 사회 제도의 결함, 특히 적서 차별 타파와 부패한 정치 개혁 의도로 지은 사회 소설임)
이를 시작으로 본격적인 소설의 시대가 펼쳐지면서 다양한 유형의 소설이 등장함

(2) 가정 소설 - 가족 구성원의 갈등과 고난을 그림
<장화홍련전>, <콩쥐팥쥐전>, ‘김만중’ <사씨남정기>

(3) 가문 소설 - 여러 가문과 인물들이登場하여 몇 대에 걸친 흥망의 과정을 그림
-<완월회맹연>, <임화정연>

(4) 군담 소설, 영웅 소설 - 실제 또는 허구적 전쟁을 배경으로 주인공의 뛰어난 활약상을 담음
-여성 영웅 소설 <홍계월전>, <박씨전>
1 [역사] 군담 소설(실재했던 전쟁을 소재) : <임진록>, <임경업전>
2 [창작] 군담 소설(허구적 전쟁을 소재) : <유충렬전>, <조웅전>

(5) [몽자류] 소설 - 꿈을 모티브로 하여 현세적 욕망의 실현을 담아냄
•	‘김만중’ <구운몽>, ‘남영로’ <옥루몽>

(6) [판소리계] 소설 - 구수한 해학과 실랄한 풍자를 담고 있음
•	<춘향전>, <심청전>,<흥부전>

(7) [우화] 소설 - 동물을 의인화하여 사회 현실을을 묘사함
•	<장끼전>, <두껍전>, <서동지전>

(8) 세태 소설 – 전환기의 세테 속에서 어리석게 행동하는 인간들의 모습을 희극적으로 조명한 소설

(9) 한문 소설 – ‘박지원’ <양반전>,<광문자전> (실학파 문인들이 지음)

(10) 조선 후기 이러다 소설이 유행한 것은
•	문학 담당층 확대
•	방각보(조선 후기에 민간인 출판업자가 출판한 책, 주로 목판본으로 만든다) 및 세책가(세를 받고 책을 빌려주는 책방) 등의 출현 및 유통 구조 발달과도 관련 있음
(10) 야담집 편찬 - 『청구야담』과 같이 설화를 채록하여 한문으로 기록한 야담집이 출현함
5.	개화기 - 신소설과 역사.전기 소설이 주류를 이룸 
(1)	[신소설] - 봉건 질서의 타파, 개화, 계몽, 자주 독립 사상 고취 등을 주제로 다룸
-우리나라 최초의 [신소설] ‘이인직’, <혈의 누>
(문명 사회에 대한 동경, 신교육, 여권 신장과 같은 새 시대의 기준을 제시함)
(2)	역사,전기 소설 – ‘장지연’,’신채호’ 지음
-국권 수호, 애국 정신을 내세움
(실제 있었던 역사적 사실을 소재로 나라의 위기를 극복하는 모습을 보여 주고자 함)

8. 1930년대 (소설의 다양성을 보여줌)
(1) 리얼리즘 소설 
- 일제 강점기에 함폐화된 농촌 현실을 유랑 실향민의 삶을 통하여
사실주의적 기법으로 형상화한 ‘이기영’ <고향>
- 빈민촌을 배경으로 궁됩한 서민의 참담한 생활을 사실적으로 그린
‘강경애’의 <지하촌>

(2) 모더니즘 소설 
- 직업이 없는 소설가 구보가 경성 시내를 떠돌며 보낸 하루를 재현한 ‘박태원’ <소설가 구보 씨의 일일>
- 자의식의 세계를 탐색한 ‘이상’ <날개>

(3)	농촌 소설 –‘심훈’ <상록수>, ‘김유정’ <만무방>

(4)역사 소설
‘김동인’ <운현궁의 봄>, ‘현진건’ <무영탑>

(5) 가족사 소설 –‘염상섭’ <삼대>, ‘채만식’ <태평천하>

9. 광복 직후
(1) 해방 전후의 시대 상황을 사실적으로 보여 주는 소설
- ‘이태준’ <해방 전후>, ‘염상섭’ <삼팔선>
(2) 해방 공간의 혼란상을 풍자하는 소설
- ‘채만식’ <미스터 방>
(3) 일제 강점기 때의 친일 행위를 비판하거나 속죄하는 소설
- ‘김동인’ <반역자>, ‘채만식’ <민족의 죄인>
(4) 순수 문학을 추구하는 소설
- ‘김동리’ <역마>, ‘황순원’ <목넘이 마을의 개>


10. 1950년대
(1)전쟁의 충격과 그 극복 방안을 모색한 작품
-‘황순원’ <너와 나만의 시간>, ‘장용학’ <요한 시집>, ‘박경리’ <불신 시대>, ‘선우휘’ <불꽃>, ‘하근찬’ <수난이대>, ‘손창섭’ <잉여 인간>, ‘이범선’ <오발탄>, ‘이호철’ <나상>


11. 1960년대
(1) 새로운 감각, 한글세대를 상징하는 ‘최인훈’, ‘김승옥’, ‘박태순’, ‘이청준’, ‘이문구’, ‘윤흥길’ 등이 등장하여 기성 작가들과 더불어 전쟁과 분단의 문제뿐 아니라 +개인적 삶의 문제에 이르는 폭넓은 주제를 다루면서 독자층을 확대하였다


12. 1970년대
(1) 극격한 산업화가 야기한 사회 문제들이 소설의 주제로 부각하였다
- ‘조세희’ <난장이가 쓰아 올리 작은 공>, ‘항석영’ <삼포 가는 길>


13. 1980년대
(1) 고양된 역사 의식과 미의식을 반영한 다양한 주제를 다룬 작품들이 발표되었다
- 역사를 재조명한 소설: ‘박경리’ <토지>. ‘최명희’ <혼불>
- 민주화와 경제적 성장의 그늘에서 살아온 이웃들의 구체적 삶에 관심을 보인 작품
: ‘양귀자’ <원미동 사람들>
소설의 폭을 넓히고 깊이를 더한 작가들 : ‘최일남’. ‘서정인’, ‘전상국’., ‘윤후명’. ‘오정희’, ‘박완서’, ‘이문열’, ‘임철우’, ‘최수철’


14. 1990년대
(1) 제도적 민주주의가 정착되고 경제 구조의 고도화가 진행된 1990년대 이후 한국 소설은 커다란 변화를 겪었다
(2) 작가들은 시대와 역사라는 큰 이야기보다 개인과 일상이라는 작은 이야기에 어느 때보다 주목하였다.
(3)대중문화 발달로 소설 소재와 주제가 다양해진 것도 이 시기의 특징이다.
(4)’이순원’, ‘윤대녕’. ‘김소진’. ‘공선옥’. ‘김연수’, ‘성석제’. ‘한강’, ‘은희경’, ‘김영하’. ‘집중혁’. ‘박민규’. ‘김언수’, ‘김려령’ 등이 새로운 시대의 감각에 어울리는 이야기로 독자들의 관심을 끌었다


`;

            function processText(text) {
                let processedText = '';
                let inParagraph = false;
                
                const lines = text.split('\n');
                
                for (let i = 0; i < lines.length; i++) {
                    let line = lines[i];
                    
                    // Process section headers (numbered items) first
                    const sectionMatch = line.match(/^(\d+\.)\s+(.*)/);
                    
                    if (sectionMatch) {
                        // Close previous paragraph if needed
                        if (inParagraph) {
                            processedText += '</div>';
                            inParagraph = false;
                        }
                        
                        // Add section header
                        processedText += `<div class="section-header">${sectionMatch[1]} `;
                        line = sectionMatch[2]; // Keep remaining text for bracket processing
                        
                        // Process based on current mode
                        if (currentMode === 'brackets' || currentMode === 'all') {
                            line = line.replace(/\[([^\]]+)\]/g, function(match, word) {
                                const id = 'word_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word" data-word="${word}" id="${id}">?</span>`;
                            });
                        }
                        
                        if (currentMode === 'angles' || currentMode === 'all') {
                            // Process angle brackets
                            line = line.replace(/\<([^\>]+)\>/g, function(match, word) {
                                const id = 'angle_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word-angle" data-word="${word}" id="${id}">?</span>`;
                            });
                            
                            // Also process double corner brackets
                            line = line.replace(/『([^』]+)』/g, function(match, word) {
                                const id = 'corner_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word-angle" data-word="${word}" id="${id}">?</span>`;
                            });
                        }
                        
                        if (currentMode === 'authors' || currentMode === 'all') {
                            // Process single quotes for author names
                            line = line.replace(/'([^']+)'/g, function(match, word) {
                                const id = 'author_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word-author" data-word="${word}" id="${id}">?</span>`;
                            });
                        }
                        
                        processedText += line + '</div><div class="paragraph">';
                        inParagraph = true;
                    } else if (line.trim() === '') {
                        // Empty line - close paragraph if needed
                        if (inParagraph) {
                            processedText += '</div>';
                            inParagraph = false;
                        }
                        
                        processedText += '<div class="paragraph">';
                        inParagraph = true;
                    } else {
                        // Regular line - process based on current mode
                        if (currentMode === 'brackets' || currentMode === 'all') {
                            line = line.replace(/\[([^\]]+)\]/g, function(match, word) {
                                const id = 'word_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word" data-word="${word}" id="${id}">?</span>`;
                            });
                        }
                        
                        if (currentMode === 'angles' || currentMode === 'all') {
                            // Process angle brackets
                            line = line.replace(/\<([^\>]+)\>/g, function(match, word) {
                                const id = 'angle_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word-angle" data-word="${word}" id="${id}">?</span>`;
                            });
                            
                            // Also process double corner brackets
                            line = line.replace(/『([^』]+)』/g, function(match, word) {
                                const id = 'corner_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word-angle" data-word="${word}" id="${id}">?</span>`;
                            });
                        }
                        
                        if (currentMode === 'authors' || currentMode === 'all') {
                            // Process single quotes for author names
                            line = line.replace(/'([^']+)'/g, function(match, word) {
                                const id = 'author_' + Math.random().toString(36).substr(2, 9);
                                return `<span class="hidden-word-author" data-word="${word}" id="${id}">?</span>`;
                            });
                        }
                        
                        if (!inParagraph) {
                            processedText += '<div class="paragraph">';
                            inParagraph = true;
                        }
                        
                        processedText += line + '<br>';
                    }
                }
                
                // Close final paragraph if needed
                if (inParagraph) {
                    processedText += '</div>';
                }
                
                output.innerHTML = processedText;
                
                const hiddenWords = document.querySelectorAll('.hidden-word, .hidden-word-angle, .hidden-word-author');
                hiddenWords.forEach(function(element) {
                    element.removeEventListener('click', toggleWord); 
                    element.addEventListener('click', toggleWord); 
                });

                localStorage.setItem('lastDisplayedContent', text);
                localStorage.setItem('currentMode', currentMode);
            }
            
            function toggleWord(event) {
                const element = event.target;
                if (element.textContent === '?') {
                    element.textContent = element.getAttribute('data-word');
                } else {
                    element.textContent = '?';
                }
            }
            
            function revealAll() {
                const hiddenWords = document.querySelectorAll('.hidden-word, .hidden-word-angle, .hidden-word-author');
                hiddenWords.forEach(function(element) {
                    element.textContent = element.getAttribute('data-word');
                });
            }
            
            function hideAll() {
                const hiddenWords = document.querySelectorAll('.hidden-word, .hidden-word-angle, .hidden-word-author');
                hiddenWords.forEach(function(element) {
                    element.textContent = '?';
                });
            }

            function loadInitialContent() {
                const lastDisplayedContent = localStorage.getItem('lastDisplayedContent');
                const savedMode = localStorage.getItem('currentMode');
                
                if (savedMode) {
                    currentMode = savedMode;
                    updateModeUI();
                }
                
                if (lastDisplayedContent) {
                    processText(lastDisplayedContent);
                } else {
                    processText(defaultContent);
                }
            }
            
            function resetToDefault() {
                 if (confirm('현재 내용을 지우고 예제 학습지로 바꾸시겠습니까?')) {
                    processText(defaultContent);
                 }
            }
            
            function updateModeUI() {
                bracketModeBtn.classList.remove('active');
                angleModeBtn.classList.remove('active');
                authorModeBtn.classList.remove('active');
                allModeBtn.classList.remove('active');
                
                if (currentMode === 'brackets') {
                    bracketModeBtn.classList.add('active');
                    currentModeDesc.textContent = "[대괄호]로 표시된 단어는 '?'로 가려져 있습니다.";
                } else if (currentMode === 'angles') {
                    angleModeBtn.classList.add('active');
                    currentModeDesc.textContent = "<꺾쇠>와 『』로 표시된 작품명은 '?'로 가려져 있습니다.";
                } else if (currentMode === 'authors') {
                    authorModeBtn.classList.add('active');
                    currentModeDesc.textContent = "'작은따옴표'로 표시된 작가명은 '?'로 가려져 있습니다.";
                } else if (currentMode === 'all') {
                    allModeBtn.classList.add('active');
                    currentModeDesc.textContent = "모든 유형의 단어([대괄호], <작품명>, '작가명')가 '?'로 가려져 있습니다.";
                }
            }
            
            bracketModeBtn.addEventListener('click', function() {
                currentMode = 'brackets';
                updateModeUI();
                const lastDisplayedContent = localStorage.getItem('lastDisplayedContent');
                if (lastDisplayedContent) {
                    processText(lastDisplayedContent);
                } else {
                    processText(defaultContent);
                }
            });
            
            angleModeBtn.addEventListener('click', function() {
                currentMode = 'angles';
                updateModeUI();
                const lastDisplayedContent = localStorage.getItem('lastDisplayedContent');
                if (lastDisplayedContent) {
                    processText(lastDisplayedContent);
                } else {
                    processText(defaultContent);
                }
            });
            
            authorModeBtn.addEventListener('click', function() {
                currentMode = 'authors';
                updateModeUI();
                const lastDisplayedContent = localStorage.getItem('lastDisplayedContent');
                if (lastDisplayedContent) {
                    processText(lastDisplayedContent);
                } else {
                    processText(defaultContent);
                }
            });
            
            allModeBtn.addEventListener('click', function() {
                currentMode = 'all';
                updateModeUI();
                const lastDisplayedContent = localStorage.getItem('lastDisplayedContent');
                if (lastDisplayedContent) {
                    processText(lastDisplayedContent);
                } else {
                    processText(defaultContent);
                }
            });

            resetButton.addEventListener('click', resetToDefault);
            revealAllButton.addEventListener('click', revealAll);
            hideAllButton.addEventListener('click', hideAll);
            
            // Youth Assistant Toggle
            const youthToggle = document.getElementById('youthToggle');
            const youthContent = document.getElementById('youthContent');
            const youthToggleIcon = document.querySelector('.youth-toggle');
            
            youthToggle.addEventListener('click', function() {
                youthContent.classList.toggle('open');
                if (youthContent.classList.contains('open')) {
                    youthToggleIcon.textContent = '▲';
                    // Scroll to youth section if not visible
                    const youthSection = document.querySelector('.youth-section');
                    const rect = youthSection.getBoundingClientRect();
                    if (rect.bottom > window.innerHeight) {
                        youthSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                } else {
                    youthToggleIcon.textContent = '▼';
                }
            });
            
            loadInitialContent();
        });
    </script>
</body>
</html>